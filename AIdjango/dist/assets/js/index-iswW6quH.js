import{d as B,m as v,W as ee,J as F,A as H,r,o as V,c as x,b as e,w as l,F as le,a as s,x as q,s as K,z as P,n as J,h as W,X as I,p as N,g as Z,Y as X,Z as Y,_ as G,v as ae,$ as te,u as oe,V as ie,e as d}from"./index-jvtWBQTx.js";import{u as se}from"./upload-tKNuBlkM.js";import{_ as Q}from"./_plugin-vue_export-helper-x3n3nnut.js";const A=p=>(N("data-v-0fe19d29"),p=p(),Z(),p),de={class:"upload-box"},ne=["src"],ue=A(()=>s("span",null,"编辑",-1)),re=A(()=>s("span",null,"查看",-1)),pe=A(()=>s("span",null,"删除",-1)),me={key:1,class:"upload-empty"},ce={class:"el-upload__tip"},fe=B({name:"UploadImg"}),_e=B({...fe,props:{imageUrl:{default:""},api:{},drag:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},fileSize:{default:5},fileType:{default:()=>["image/jpeg","image/png","image/gif"]},height:{default:"150px"},width:{default:"150px"},borderRadius:{default:"8px"}},emits:["update:imageUrl"],setup(p,{emit:z}){X(i=>({"10fcd1c8":i.width,"423b5ade":i.height,"6156f470":i.borderRadius}));const m=p,h=v("id-"+ee()),U=v(!1),b=F(Y,void 0),_=F(G,void 0),C=H(()=>m.disabled||(b==null?void 0:b.disabled)),M=z,c=async i=>{let u=new FormData;u.append("file",i.file);try{const a=m.api??se,{data:n}=await a(u);M("update:imageUrl",n.fileUrl),_!=null&&_.prop&&(b==null||b.validateField([_.prop]))}catch(a){i.onError(a)}},g=()=>{M("update:imageUrl","")},R=()=>{const i=document.querySelector(`#${h.value} .el-upload__input`);i&&i.dispatchEvent(new MouseEvent("click"))},T=i=>{const u=i.size/1024/1024<m.fileSize,a=m.fileType.includes(i.type);return a||I({title:"温馨提示",message:"上传图片不符合所需的格式！",type:"warning"}),u||setTimeout(()=>{I({title:"温馨提示",message:`上传图片大小不能超过 ${m.fileSize}M！`,type:"warning"})},0),a&&u},E=()=>{I({title:"温馨提示",message:"图片上传成功！",type:"success"})},t=()=>{I({title:"温馨提示",message:"图片上传失败，请您重新上传！",type:"error"})};return(i,u)=>{const a=r("Edit"),n=r("el-icon"),y=r("ZoomIn"),j=r("Delete"),f=r("Plus"),$=r("el-upload"),S=r("el-image-viewer");return V(),x("div",de,[e($,{id:h.value,action:"#",class:J(["upload",C.value?"disabled":"",i.drag?"no-border":""]),multiple:!1,disabled:C.value,"show-file-list":!1,"http-request":c,"before-upload":T,"on-success":E,"on-error":t,drag:i.drag,accept:i.fileType.join(",")},{default:l(()=>[i.imageUrl?(V(),x(le,{key:0},[s("img",{src:i.imageUrl,class:"upload-image"},null,8,ne),s("div",{class:"upload-handle",onClick:u[1]||(u[1]=K(()=>{},["stop"]))},[C.value?q("",!0):(V(),x("div",{key:0,class:"handle-icon",onClick:R},[e(n,null,{default:l(()=>[e(a)]),_:1}),ue])),s("div",{class:"handle-icon",onClick:u[0]||(u[0]=w=>U.value=!0)},[e(n,null,{default:l(()=>[e(y)]),_:1}),re]),C.value?q("",!0):(V(),x("div",{key:1,class:"handle-icon",onClick:g},[e(n,null,{default:l(()=>[e(j)]),_:1}),pe]))])],64)):(V(),x("div",me,[P(i.$slots,"empty",{},()=>[e(n,null,{default:l(()=>[e(f)]),_:1})],!0)]))]),_:3},8,["id","class","disabled","drag","accept"]),s("div",ce,[P(i.$slots,"tip",{},void 0,!0)]),U.value?(V(),W(S,{key:0,"url-list":[i.imageUrl],onClose:u[2]||(u[2]=w=>U.value=!1)},null,8,["url-list"])):q("",!0)])}}}),L=Q(_e,[["__scopeId","data-v-0fe19d29"]]),O=p=>(N("data-v-6b719de9"),p=p(),Z(),p),ge={class:"upload-box"},ve={class:"upload-empty"},be=["src"],he=["onClick"],ye=O(()=>s("span",null,"查看",-1)),Ue=["onClick"],we=O(()=>s("span",null,"删除",-1)),$e={class:"el-upload__tip"},Ve=B({name:"UploadImgs"}),ke=B({...Ve,props:{fileList:{default:()=>[]},api:{},drag:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},limit:{default:5},fileSize:{default:5},fileType:{default:()=>["image/jpeg","image/png","image/gif"]},height:{default:"150px"},width:{default:"150px"},borderRadius:{default:"8px"}},emits:["update:fileList"],setup(p,{emit:z}){X(a=>({"9922e3ce":a.borderRadius,"3892d7eb":a.width,"800da8bc":a.height}));const m=p,h=F(Y,void 0),U=F(G,void 0),b=H(()=>m.disabled||(h==null?void 0:h.disabled)),_=v(m.fileList);ae(()=>m.fileList,a=>{_.value=a});const C=a=>{const n=a.size/1024/1024<m.fileSize,y=m.fileType.includes(a.type);return y||I({title:"温馨提示",message:"上传图片不符合所需的格式！",type:"warning"}),n||setTimeout(()=>{I({title:"温馨提示",message:`上传图片大小不能超过 ${m.fileSize}M！`,type:"warning"})},0),y&&n},M=async a=>{},c=z,g=(a,n)=>{a&&(n.url=a.fileUrl,c("update:fileList",_.value),U!=null&&U.prop&&(h==null||h.validateField([U.prop])),I({title:"温馨提示",message:"图片上传成功！",type:"success"}))},R=a=>{_.value=_.value.filter(n=>n.url!==a.url||n.name!==a.name),c("update:fileList",_.value)},T=()=>{I({title:"温馨提示",message:"图片上传失败，请您重新上传！",type:"error"})},E=()=>{I({title:"温馨提示",message:`当前最多只能上传 ${m.limit} 张图片，请移除后上传！`,type:"warning"})},t=v(""),i=v(!1),u=a=>{t.value=a.url,i.value=!0};return(a,n)=>{const y=r("el-icon"),j=r("ZoomIn"),f=r("Delete"),$=r("el-upload"),S=r("el-image-viewer");return V(),x("div",ge,[e($,{"file-list":_.value,"onUpdate:fileList":n[1]||(n[1]=w=>_.value=w),action:"#","list-type":"picture-card",class:J(["upload",b.value?"disabled":"",a.drag?"no-border":""]),multiple:!0,disabled:b.value,limit:a.limit,"http-request":M,"before-upload":C,"on-exceed":E,"on-success":g,"on-error":T,drag:a.drag,accept:a.fileType.join(",")},{file:l(({file:w})=>[s("img",{src:w.url,class:"upload-image"},null,8,be),s("div",{class:"upload-handle",onClick:n[0]||(n[0]=K(()=>{},["stop"]))},[s("div",{class:"handle-icon",onClick:o=>u(w)},[e(y,null,{default:l(()=>[e(j)]),_:1}),ye],8,he),b.value?q("",!0):(V(),x("div",{key:0,class:"handle-icon",onClick:o=>R(w)},[e(y,null,{default:l(()=>[e(f)]),_:1}),we],8,Ue))])]),default:l(()=>[s("div",ve,[P(a.$slots,"empty",{},()=>[e(y,null,{default:l(()=>[e(oe(te))]),_:1})],!0)])]),_:3},8,["file-list","class","disabled","limit","drag","accept"]),s("div",$e,[P(a.$slots,"tip",{},void 0,!0)]),i.value?(V(),W(S,{key:0,"url-list":[t.value],onClose:n[2]||(n[2]=w=>i.value=!1)},null,8,["url-list"])):q("",!0)])}}}),D=Q(ke,[["__scopeId","data-v-6b719de9"]]),k=p=>(N("data-v-abf66c18"),p=p(),Z(),p),Ce={class:"upload content-box"},Ie={class:"card img-box"},Se=k(()=>s("span",{class:"text"},"多图片上传组件 🍓🍇🍈🍉",-1)),xe={class:"upload-list"},Le=k(()=>s("span",null,"请上传照片",-1)),ze=k(()=>s("span",null,"请上传照片",-1)),Me={class:"card img-box"},Re=k(()=>s("span",{class:"text"},"单图片上传组件 🍓🍇🍈🍉",-1)),Te={class:"upload-list"},je=k(()=>s("span",null,"请上传头像",-1)),Be=k(()=>s("span",null,"请上传 Banner 图",-1)),Ee={class:"form-box"},qe={class:"card"},De=k(()=>s("span",null,"请上传头像",-1)),Fe=k(()=>s("span",null,"请上传照片",-1)),Pe={class:"card"},Ne=k(()=>s("span",null,"请上传头像",-1)),Ze=k(()=>s("span",null,"请上传照片",-1)),Qe=B({name:"uploadFile"}),Ae=B({...Qe,setup(p){const z=v([{name:"img",url:"https://i.imgtg.com/2023/01/16/QRBHS.jpg"}]),m=v([]),h=v(""),U=v(""),b=v(""),_=v(""),C=v("https://i.imgtg.com/2023/01/16/QRqMK.jpg"),M=ie({avatar:[{required:!0,message:"请上传用户头像"}],photo:[{required:!0,message:"请上传用户照片"}],username:[{required:!0,message:"请填写用户姓名"}],idCard:[{required:!0,message:"请填写身份证号"}],email:[{required:!0,message:"请填写邮箱"}]}),c=v({avatar:"",photo:[{name:"img",url:"https://i.imgtg.com/2023/01/16/QR57a.jpg"}],username:"",idCard:"",email:""}),g=v({avatar:"",photo:[{name:"img",url:"https://i.imgtg.com/2023/01/16/QR57a.jpg"}],username:"",idCard:"",email:""}),R=v(),T=()=>{R.value.validate(E=>{})};return(E,t)=>{const i=r("Picture"),u=r("el-icon"),a=r("el-descriptions-item"),n=r("el-descriptions"),y=r("Avatar"),j=r("el-alert"),f=r("el-form-item"),$=r("el-input"),S=r("el-button"),w=r("el-form");return V(),x("div",Ce,[s("div",Ie,[Se,s("div",xe,[e(D,{"file-list":z.value,"onUpdate:fileList":t[0]||(t[0]=o=>z.value=o),drag:!1,"border-radius":"50%"},{empty:l(()=>[e(u,null,{default:l(()=>[e(i)]),_:1}),Le]),tip:l(()=>[d(" 圆形组件，图片最大为 5M（禁止拖拽上传） ")]),_:1},8,["file-list"]),e(D,{"file-list":m.value,"onUpdate:fileList":t[1]||(t[1]=o=>m.value=o),width:"250px"},{empty:l(()=>[e(u,null,{default:l(()=>[e(i)]),_:1}),ze]),tip:l(()=>[d(" 长方形组件（可拖拽上传） ")]),_:1},8,["file-list"])]),e(n,{title:"配置项 📚（其它参数和单图上传组件相同）",column:1,border:""},{default:l(()=>[e(a,{label:"fileList"},{default:l(()=>[d(' 双向绑定的 fileList 值，使用示例： v-model:file-list="fileList" ')]),_:1}),e(a,{label:"limit"},{default:l(()=>[d(" 最大图片上传数，默认为 5 张 ")]),_:1})]),_:1})]),s("div",Me,[Re,s("div",Te,[e(L,{"image-url":h.value,"onUpdate:imageUrl":t[2]||(t[2]=o=>h.value=o),"file-size":3},{tip:l(()=>[d(" 上传图片最大为 3M ")]),_:1},8,["image-url"]),e(L,{"image-url":U.value,"onUpdate:imageUrl":t[3]||(t[3]=o=>U.value=o),drag:!1,"border-radius":"50%"},{empty:l(()=>[e(u,null,{default:l(()=>[e(y)]),_:1}),je]),tip:l(()=>[d(" 圆形组件（禁止拖拽上传） ")]),_:1},8,["image-url"]),e(L,{"image-url":b.value,"onUpdate:imageUrl":t[4]||(t[4]=o=>b.value=o),width:"250px"},{empty:l(()=>[e(u,null,{default:l(()=>[e(i)]),_:1}),Be]),tip:l(()=>[d(" 长方形组件（可拖拽上传） ")]),_:1},8,["image-url"]),e(L,{"image-url":_.value,"onUpdate:imageUrl":t[5]||(t[5]=o=>_.value=o),disabled:""},{tip:l(()=>[d(" 无图（禁用上传） ")]),_:1},8,["image-url"]),e(L,{"image-url":C.value,"onUpdate:imageUrl":t[6]||(t[6]=o=>C.value=o),disabled:""},{tip:l(()=>[d(" 有图（禁用编辑、删除） ")]),_:1},8,["image-url"])]),e(n,{title:"配置项 📚",column:1,border:""},{default:l(()=>[e(a,{label:"imageUrl"},{default:l(()=>[d(' 双向绑定的 imageUrl 值，使用示例： v-model:image-url="avatar" ')]),_:1}),e(a,{label:"api"},{default:l(()=>[d(" 上传图片的 api 方法，一般项目上传都是同一个 api 方法，在组件里直接引入即可（非必传） ")]),_:1}),e(a,{label:"drag"},{default:l(()=>[d(" 是否支持拖拽上传图片，默认为 true ")]),_:1}),e(a,{label:"disabled"},{default:l(()=>[d(" 是否禁用 上传、删除 功能，可查看图片 ")]),_:1}),e(a,{label:"fileSize"},{default:l(()=>[d(" 单个图片文件大小限制，默认为 5M ")]),_:1}),e(a,{label:"fileType"},{default:l(()=>[d(' 图片类型限制，默认类型为 ["image/jpeg", "image/png", "image/gif"] ')]),_:1}),e(a,{label:"height"},{default:l(()=>[d(' 组件高度样式，默认为 "150px" ')]),_:1}),e(a,{label:"width"},{default:l(()=>[d(' 组件宽度样式，默认为 "150px" ')]),_:1}),e(a,{label:"borderRadius"},{default:l(()=>[d(' 组件边框圆角样式，默认为 "8px" ')]),_:1})]),_:1})]),s("div",Ee,[s("div",qe,[e(j,{title:"图片上传组件在 form 表单中使用，上传之后成功会自动重新校验",type:"warning",effect:"dark",closable:!1,class:"mb20"}),e(w,{ref_key:"ruleFormRef",ref:R,"label-width":"100px","label-suffix":" :",rules:M,model:c.value},{default:l(()=>[e(f,{label:"用户头像",prop:"avatar"},{default:l(()=>[e(L,{"image-url":c.value.avatar,"onUpdate:imageUrl":t[7]||(t[7]=o=>c.value.avatar=o),width:"135px",height:"135px","file-size":3},{empty:l(()=>[e(u,null,{default:l(()=>[e(y)]),_:1}),De]),tip:l(()=>[d(" 头像大小不能超过 3M ")]),_:1},8,["image-url"])]),_:1}),e(f,{label:"用户照片",prop:"photo"},{default:l(()=>[e(D,{"file-list":c.value.photo,"onUpdate:fileList":t[8]||(t[8]=o=>c.value.photo=o),limit:3,height:"140px",width:"140px","border-radius":"50%"},{empty:l(()=>[e(u,null,{default:l(()=>[e(i)]),_:1}),Fe]),tip:l(()=>[d(" 最多上传 3 张照片 ")]),_:1},8,["file-list"])]),_:1}),e(f,{label:"用户姓名",prop:"username"},{default:l(()=>[e($,{modelValue:c.value.username,"onUpdate:modelValue":t[9]||(t[9]=o=>c.value.username=o),placeholder:"请填写用户姓名",clearable:""},null,8,["modelValue"])]),_:1}),e(f,{label:"身份证号",prop:"idCard"},{default:l(()=>[e($,{modelValue:c.value.idCard,"onUpdate:modelValue":t[10]||(t[10]=o=>c.value.idCard=o),placeholder:"请填写身份证号",clearable:""},null,8,["modelValue"])]),_:1}),e(f,{label:"邮箱",prop:"email"},{default:l(()=>[e($,{modelValue:c.value.email,"onUpdate:modelValue":t[11]||(t[11]=o=>c.value.email=o),placeholder:"请填写邮箱",clearable:""},null,8,["modelValue"])]),_:1}),e(f,null,{default:l(()=>[e(S,null,{default:l(()=>[d(" 取消 ")]),_:1}),e(S,{type:"primary",onClick:T},{default:l(()=>[d(" 确定 ")]),_:1})]),_:1})]),_:1},8,["rules","model"])]),s("div",Pe,[e(j,{title:"图片上传组件在 form 表单中使用，如果该表单禁用，则上传组件会自动禁用",type:"warning",effect:"dark",closable:!1,class:"mb20"}),e(w,{"label-width":"100px","label-suffix":" :",disabled:"",model:g.value},{default:l(()=>[e(f,{label:"用户头像",prop:"avatar"},{default:l(()=>[e(L,{"image-url":g.value.avatar,"onUpdate:imageUrl":t[12]||(t[12]=o=>g.value.avatar=o),width:"135px",height:"135px","file-size":3},{empty:l(()=>[e(u,null,{default:l(()=>[e(y)]),_:1}),Ne]),tip:l(()=>[d(" 头像大小不能超过 3M ")]),_:1},8,["image-url"])]),_:1}),e(f,{label:"用户照片",prop:"photo"},{default:l(()=>[e(D,{"file-list":g.value.photo,"onUpdate:fileList":t[13]||(t[13]=o=>g.value.photo=o),height:"140px",width:"140px","border-radius":"50%"},{empty:l(()=>[e(u,null,{default:l(()=>[e(i)]),_:1}),Ze]),tip:l(()=>[d(" 照片大小不能超过 5M ")]),_:1},8,["file-list"])]),_:1}),e(f,{label:"用户姓名",prop:"username"},{default:l(()=>[e($,{modelValue:g.value.username,"onUpdate:modelValue":t[14]||(t[14]=o=>g.value.username=o),placeholder:"请填写用户姓名",clearable:""},null,8,["modelValue"])]),_:1}),e(f,{label:"身份证号",prop:"idCard"},{default:l(()=>[e($,{modelValue:g.value.idCard,"onUpdate:modelValue":t[15]||(t[15]=o=>g.value.idCard=o),placeholder:"请填写身份证号",clearable:""},null,8,["modelValue"])]),_:1}),e(f,{label:"邮箱",prop:"email"},{default:l(()=>[e($,{modelValue:g.value.email,"onUpdate:modelValue":t[16]||(t[16]=o=>g.value.email=o),placeholder:"请填写邮箱",clearable:""},null,8,["modelValue"])]),_:1}),e(f,null,{default:l(()=>[e(S,null,{default:l(()=>[d(" 取消 ")]),_:1}),e(S,{type:"primary",onClick:T},{default:l(()=>[d(" 确定 ")]),_:1})]),_:1})]),_:1},8,["model"])])])])}}}),We=Q(Ae,[["__scopeId","data-v-abf66c18"]]);export{We as default};
