import{d as T,G as U,m as b,V as h,r as u,a6 as B,o as d,c as $,b as s,w as r,ac as g,h as m,e as o,u as n,a7 as E,aa as H,ab as M,x as F,t as _,R as f,ag as I,ah as P,a9 as Y}from"./index-jvtWBQTx.js";import{I as z,u as G,a as J}from"./index-J6cgkzRL.js";import{_ as O}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-xXfAj66y.js";import{h as q,e as k,B as j,b as K,c as Q,d as W,f as X}from"./user-B5eqbc-g.js";import{_ as Z}from"./UserDrawer1.vue_vue_type_script_setup_true_name_UserDrawer_lang-1Uf_rXD0.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./sortable.esm-7KB62mPT.js";import"./video-js-tupHlAe4.js";import"./upload-tKNuBlkM.js";const ee={class:"table-box"},ae=T({name:"useProTable"}),me=T({...ae,setup(te){U();const C=!1,i=b(),x=h({type:1}),D=a=>({list:a.list,total:a.total,pageNum:a.pageNum,pageSize:a.pageSize}),V=a=>{let e=JSON.parse(JSON.stringify(a));return e.createTime&&(e.startTime=e.createTime[0]),e.createTime&&(e.endTime=e.createTime[1]),delete e.createTime,q(e)},A=h([{type:"sort",label:"Sort",width:80},{prop:"username",label:"用户姓名"},{prop:"gender",label:"性别",width:80,enum:W,search:{el:"select",props:{filterable:!0}},fieldNames:{label:"genderLabel",value:"genderValue"}},{prop:"user.detail.age",label:"年龄",width:80,search:{render:({searchParam:a})=>s("div",{class:"flx-center"},[s(u("el-input"),{modelValue:a.minAge,modelModifiers:{trim:!0},"onUpdate:modelValue":e=>a.minAge=e,placeholder:"最小年龄"},null),s("span",{class:"mr10 ml10"},[o("-")]),s(u("el-input"),{modelValue:a.maxAge,modelModifiers:{trim:!0},"onUpdate:modelValue":e=>a.maxAge=e,placeholder:"最大年龄"},null)])}},{prop:"idCard",label:"身份证号",search:{el:"input"}},{prop:"email",label:"手机号"},{prop:"address",label:"居住地址",width:240},{prop:"createTime",label:"挂号时间",headerRender:a=>s(u("el-button"),{type:"primary",onClick:()=>f.success("我是通过 tsx 语法渲染的表头")},{default:()=>[a.column.label]}),width:180,search:{el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"},defaultValue:["2022-11-12 11:35:00","2024-12-12 11:35:00"]}},{prop:"operation",label:"操作",fixed:"right",width:120}]),L=({newIndex:a,oldIndex:e})=>{var t;(t=i.value)==null||t.tableData,f.success("修改列表排序成功")},S=async a=>{var e,t;await J(X,{id:a},"删除所选用户信息"),(e=i.value)==null||e.clearSelection(),(t=i.value)==null||t.getTableList()},N=async()=>{P.confirm("确认导出用户数据?","温馨提示",{type:"warning"}).then(()=>{var a;return G(k,"用户列表",(a=i.value)==null?void 0:a.searchParam)})},y=b(null),R=()=>{var e,t;const a={title:"用户",tempApi:k,importApi:j,getTableList:(e=i.value)==null?void 0:e.getTableList};(t=y.value)==null||t.acceptParams(a)},v=b(null),w=(a,e={})=>{var c,l;const t={title:a,isView:a==="查看",row:{...e},api:a==="新增"?K:a==="编辑"?Q:void 0,getTableList:(c=i.value)==null?void 0:c.getTableList,id:e.id};(l=v.value)==null||l.acceptParams(t)};return(a,e)=>{const t=u("el-button"),c=B("auth");return d(),$("div",ee,[s(O,{ref_key:"proTable",ref:i,columns:A,"request-api":V,"init-param":x,"data-callback":D,onDargSort:L},{tableHeader:r(l=>[g((d(),m(t,{type:"primary",icon:n(E),onClick:e[0]||(e[0]=p=>w("新增"))},{default:r(()=>[o("新增用户")]),_:1},8,["icon"])),[[c,"add"]]),g((d(),m(t,{type:"primary",icon:n(H),plain:"",onClick:R},{default:r(()=>[o("批量添加用户")]),_:1},8,["icon"])),[[c,"batchAdd"]]),g((d(),m(t,{type:"primary",icon:n(M),plain:"",onClick:N},{default:r(()=>[o("导出用户数据")]),_:1},8,["icon"])),[[c,"export"]]),C?(d(),m(t,{key:0,type:"danger",icon:n(Y),plain:"",disabled:!l.isSelected,onClick:p=>S(l.selectedListIds)},{default:r(()=>[o(" 批量删除用户 ")]),_:2},1032,["icon","disabled","onClick"])):F("",!0)]),expand:r(l=>[o(_(l.row),1)]),usernameHeader:r(l=>[s(t,{type:"primary",onClick:e[1]||(e[1]=p=>n(f).success("我是通过作用域插槽渲染的表头"))},{default:r(()=>[o(_(l.column.label),1)]),_:2},1024)]),createTime:r(l=>[s(t,{type:"primary",link:"",onClick:e[2]||(e[2]=p=>n(f).success("我是通过作用域插槽渲染的内容"))},{default:r(()=>[o(_(l.row.createTime),1)]),_:2},1024)]),operation:r(l=>[s(t,{type:"primary",link:"",icon:n(I),onClick:p=>w("查看",l.row)},{default:r(()=>[o("查看")]),_:2},1032,["icon","onClick"])]),_:1},8,["columns","init-param"]),s(Z,{ref_key:"drawerRef",ref:v},null,512),s(z,{ref_key:"dialogRef",ref:y},null,512)])}}});export{me as default};
