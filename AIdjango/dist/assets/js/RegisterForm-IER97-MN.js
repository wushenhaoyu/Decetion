import{d as z,G as B,m as V,V as v,a1 as E,r as l,o as T,c as A,b as e,w as o,u as g,N as C,e as m,a as h,aL as j,F as G,X as w,aP as I,aN as k,aQ as L}from"./index-jvtWBQTx.js";import{m as M}from"./md5-wN-gQDoO.js";import{_ as P}from"./_plugin-vue_export-helper-x3n3nnut.js";const Q={class:"login-btn"},S={style:{display:"flex","justify-content":"end"}},X=z({__name:"RegisterForm",setup($){const c=B(),y=V(),x=v({username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],authCode:[{required:!0,message:"请输入医院认证码",trigger:"blur"}],verificationCode:[{required:!0,message:"请输入邮箱验证码",trigger:"blur"}],name:[{required:!0,message:"请输入您的姓名",trigger:"blur"}]}),p=V(!1),t=v({username:"",password:"",authCode:"",verificationCode:"",name:""}),b=()=>{w({title:"注意",message:"注册医院请填写完整以满足通过标准",type:"warning",duration:5e3}),c.push("/login/registerhospital")},F=s=>{s&&s.validate(async a=>{if(a){p.value=!0;try{const n=await I({...t,password:M(t.password)});n.success,n.success?(w({title:k(),message:"注册成功！",type:"success",duration:3e3}),setTimeout(()=>{c.push("login")},3e3)):w({title:k(),message:"注册失败！",type:"error",duration:3e3})}finally{p.value=!1}}})},N=()=>{c.push("login")},R=()=>{let s=t.username;L({email:s})};return E(()=>{document.onkeydown=s=>{s=window.event||s,(s.code==="Enter"||s.code==="enter"||s.code==="NumpadEnter")&&p.value}}),(s,a)=>{const n=l("user"),i=l("el-icon"),u=l("el-input"),d=l("el-form-item"),_=l("lock"),f=l("el-button"),q=l("el-form"),U=l("el-link");return T(),A(G,null,[e(q,{ref_key:"registerFormRef",ref:y,model:t,rules:x,size:"large"},{default:o(()=>[e(d,{prop:"name"},{default:o(()=>[e(u,{modelValue:t.name,"onUpdate:modelValue":a[0]||(a[0]=r=>t.name=r),placeholder:"输入您的姓名"},{prefix:o(()=>[e(i,{class:"el-input__icon"},{default:o(()=>[e(n)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{prop:"username"},{default:o(()=>[e(u,{modelValue:t.username,"onUpdate:modelValue":a[1]||(a[1]=r=>t.username=r),placeholder:"输入邮箱",type:"email"},{prefix:o(()=>[e(i,{class:"el-input__icon"},{default:o(()=>[e(n)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{prop:"password"},{default:o(()=>[e(u,{modelValue:t.password,"onUpdate:modelValue":a[2]||(a[2]=r=>t.password=r),type:"password",placeholder:"输入密码","show-password":""},{prefix:o(()=>[e(i,{class:"el-input__icon"},{default:o(()=>[e(_)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{prop:"authCode"},{default:o(()=>[e(u,{modelValue:t.authCode,"onUpdate:modelValue":a[3]||(a[3]=r=>t.authCode=r),type:"password",placeholder:"输入医院认证码","show-password":""},{prefix:o(()=>[e(i,{class:"el-input__icon"},{default:o(()=>[e(_)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(d,{prop:"verificationCode"},{default:o(()=>[e(u,{style:{width:"55%","margin-right":"5%"},modelValue:t.verificationCode,"onUpdate:modelValue":a[4]||(a[4]=r=>t.verificationCode=r),maxlength:"5",placeholder:"输入验证码"},{prefix:o(()=>[e(i,{class:"el-input__icon"},{default:o(()=>[e(_)]),_:1})]),_:1},8,["modelValue"]),e(f,{icon:g(C),onClick:R,style:{width:"40%"}},{default:o(()=>[m(" 获取验证码 ")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model","rules"]),h("div",Q,[e(f,{icon:g(C),round:"",size:"large",onClick:N},{default:o(()=>[m(" 登录 ")]),_:1},8,["icon"]),e(f,{icon:g(j),round:"",size:"large",type:"primary",loading:p.value,onClick:a[5]||(a[5]=r=>F(y.value))},{default:o(()=>[m(" 注册 ")]),_:1},8,["icon","loading"])]),h("div",S,[e(U,{type:"primary",onClick:b},{default:o(()=>[m("注册医院？")]),_:1})])],64)}}}),K=P(X,[["__scopeId","data-v-3af99e6a"]]);export{K as default};
