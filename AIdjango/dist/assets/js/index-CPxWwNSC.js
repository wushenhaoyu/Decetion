import{d as T,G as B,m as b,V as h,r as u,a6 as $,o as d,c as E,b as o,w as r,ac as g,h as m,e as s,u as n,a7 as M,aa as F,ab as H,x as P,t as _,R as f,ag as I,ah as Y,a9 as z}from"./index-jvtWBQTx.js";import{I as G,u as J,a as O}from"./index-J6cgkzRL.js";import{_ as j}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-xXfAj66y.js";import{_ as q}from"./UserDrawer.vue_vue_type_script_setup_true_name_UserDrawer_lang-E-HnSwEp.js";import{j as W,e as k,B as K,b as Q,c as X,d as Z,f as ee}from"./user-B5eqbc-g.js";import"./_plugin-vue_export-helper-x3n3nnut.js";import"./sortable.esm-7KB62mPT.js";import"./video-js-tupHlAe4.js";import"./UserDrawer1.vue_vue_type_script_setup_true_name_UserDrawer_lang-1Uf_rXD0.js";import"./upload-tKNuBlkM.js";const ae={class:"table-box"},te=T({name:"useProTable"}),be=T({...te,setup(le){const C=()=>{i.value.getTableList()};B();const x=!1,i=b(),D=h({type:1}),V=a=>({list:a.list,total:a.total,pageNum:a.pageNum,pageSize:a.pageSize}),L=a=>{let e=JSON.parse(JSON.stringify(a));return e.createTime&&(e.startTime=e.createTime[0]),e.createTime&&(e.endTime=e.createTime[1]),delete e.createTime,W(e)},N=h([{type:"sort",label:"Sort",width:80},{prop:"username",label:"用户姓名"},{prop:"gender",label:"性别",width:80,enum:Z,search:{el:"select",props:{filterable:!0}},fieldNames:{label:"genderLabel",value:"genderValue"}},{prop:"user.detail.age",label:"年龄",width:80,search:{render:({searchParam:a})=>o("div",{class:"flx-center"},[o(u("el-input"),{modelValue:a.minAge,modelModifiers:{trim:!0},"onUpdate:modelValue":e=>a.minAge=e,placeholder:"最小年龄"},null),o("span",{class:"mr10 ml10"},[s("-")]),o(u("el-input"),{modelValue:a.maxAge,modelModifiers:{trim:!0},"onUpdate:modelValue":e=>a.maxAge=e,placeholder:"最大年龄"},null)])}},{prop:"idCard",label:"身份证号",search:{el:"input"}},{prop:"email",label:"手机号"},{prop:"address",label:"居住地址",width:240},{prop:"createTime",label:"挂号时间",headerRender:a=>o(u("el-button"),{type:"primary",onClick:()=>f.success("我是通过 tsx 语法渲染的表头")},{default:()=>[a.column.label]}),width:180,search:{el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"},defaultValue:["2022-11-12 11:35:00","2024-12-12 11:35:00"]}},{prop:"operation",label:"操作",fixed:"right",width:120}]),A=({newIndex:a,oldIndex:e})=>{var t;(t=i.value)==null||t.tableData,f.success("修改列表排序成功")},S=async a=>{var e,t;await O(ee,{id:a},"删除所选用户信息"),(e=i.value)==null||e.clearSelection(),(t=i.value)==null||t.getTableList()},R=async()=>{Y.confirm("确认导出用户数据?","温馨提示",{type:"warning"}).then(()=>{var a;return J(k,"用户列表",(a=i.value)==null?void 0:a.searchParam)})},y=b(null),U=()=>{var e,t;const a={title:"用户",tempApi:k,importApi:K,getTableList:(e=i.value)==null?void 0:e.getTableList};(t=y.value)==null||t.acceptParams(a)},v=b(null),w=(a,e={})=>{var c,l;const t={title:a,isView:a==="查看",row:{...e},api:a==="新增"?Q:a==="编辑"?X:void 0,getTableList:(c=i.value)==null?void 0:c.getTableList,id:e.id};(l=v.value)==null||l.acceptParams(t)};return(a,e)=>{const t=u("el-button"),c=$("auth");return d(),E("div",ae,[o(j,{ref_key:"proTable",ref:i,columns:N,"request-api":L,"init-param":D,"data-callback":V,onDargSort:A},{tableHeader:r(l=>[g((d(),m(t,{type:"primary",icon:n(M),onClick:e[0]||(e[0]=p=>w("新增"))},{default:r(()=>[s("新增用户")]),_:1},8,["icon"])),[[c,"add"]]),g((d(),m(t,{type:"primary",icon:n(F),plain:"",onClick:U},{default:r(()=>[s("批量添加用户")]),_:1},8,["icon"])),[[c,"batchAdd"]]),g((d(),m(t,{type:"primary",icon:n(H),plain:"",onClick:R},{default:r(()=>[s("导出用户数据")]),_:1},8,["icon"])),[[c,"export"]]),x?(d(),m(t,{key:0,type:"danger",icon:n(z),plain:"",disabled:!l.isSelected,onClick:p=>S(l.selectedListIds)},{default:r(()=>[s(" 批量删除用户 ")]),_:2},1032,["icon","disabled","onClick"])):P("",!0)]),expand:r(l=>[s(_(l.row),1)]),usernameHeader:r(l=>[o(t,{type:"primary",onClick:e[1]||(e[1]=p=>n(f).success("我是通过作用域插槽渲染的表头"))},{default:r(()=>[s(_(l.column.label),1)]),_:2},1024)]),createTime:r(l=>[o(t,{type:"primary",link:"",onClick:e[2]||(e[2]=p=>n(f).success("我是通过作用域插槽渲染的内容"))},{default:r(()=>[s(_(l.row.createTime),1)]),_:2},1024)]),operation:r(l=>[o(t,{type:"primary",link:"",icon:n(I),onClick:p=>w("查看",l.row)},{default:r(()=>[s("查看")]),_:2},1032,["icon","onClick"])]),_:1},8,["columns","init-param"]),o(q,{ref_key:"drawerRef",ref:v,onNotifyParent:C},null,512),o(G,{ref_key:"dialogRef",ref:y},null,512)])}}});export{be as default};
