import{g as x}from"./video-js-tupHlAe4.js";import{d as U,m as i,V as v,G as E,r as u,o as p,h as w,w as r,b as o,e as b,a as m,c as T,f as q,u as f,F as C,ag as H,R as I}from"./index-jvtWBQTx.js";import{_ as M}from"./index.vue_vue_type_script_setup_true_name_ProTable_lang-xXfAj66y.js";import{h as J,b as O,c as G}from"./user-B5eqbc-g.js";import{d as j}from"./upload-tKNuBlkM.js";const A={style:{display:"flex"}},K={style:{width:"30vw"}},Q=m("div",{style:{height:"1vh"}},null,-1),W=["src"],X=U({name:"UserDrawer"}),Z=U({...X,setup(ee,{expose:N}){i("");const g=v({avatar:[{required:!0,message:"请上传用户头像"}],photo:[{required:!0,message:"请上传用户照片"}],username:[{required:!0,message:"请填写用户姓名"}],gender:[{required:!0,message:"请选择性别"}],idCard:[{required:!0,message:"请填写身份证号"}],email:[{required:!0,message:"请填写手机号"}],address:[{required:!0,message:"请填写居住地址"}]}),c=i(!1),a=i({isView:!1,title:"",row:{},id:""});i("");let V=i("");const P=async t=>{if(a.value.id!=t.id){a.value=t;const e=await j({id:a.value.id});e.video,V=e.picture}c.value=!0},D=i();N({acceptParams:P});const R=t=>({list:t.list,total:t.total,pageNum:t.pageNum,pageSize:t.pageSize}),S=t=>{let e=JSON.parse(JSON.stringify(t));e.createTime&&(e.startTime=e.createTime[0]),e.createTime&&(e.endTime=e.createTime[1]),delete e.createTime;let s={...e,...a.value.row};return J(s)};E();const F=v({type:1}),_=i(),L=v([{type:"selection",fixed:"left",width:70},{type:"sort",label:"Sort",width:80},{type:"expand",label:"Expand",width:85},{prop:"gender",label:"性别"},{prop:"user.detail.age",label:"年龄"},{prop:"createTime",label:"挂号时间",width:180,search:{el:"date-picker",span:2,props:{type:"datetimerange",valueFormat:"YYYY-MM-DD HH:mm:ss"},defaultValue:["2022-11-12 11:35:00","2024-12-12 11:35:00"]}},{prop:"operation",label:"操作",fixed:"right",width:120}]),B=({newIndex:t,oldIndex:e})=>{var s;(s=_.value)==null||s.tableData,I.success("修改列表排序成功")},h=i(null),Y=(t,e={})=>{var n,d;const s={title:t,isView:t==="查看",row:{...e},api:t==="新增"?O:t==="编辑"?G:void 0,getTableList:(n=_.value)==null?void 0:n.getTableList,id:e.id};(d=h.value)==null||d.acceptParams(s)};return(t,e)=>{const s=u("el-option"),n=u("el-select"),d=u("el-form-item"),$=u("el-input"),y=u("el-form"),k=u("el-button"),z=u("el-drawer");return p(),w(z,{modelValue:c.value,"onUpdate:modelValue":e[4]||(e[4]=l=>c.value=l),"destroy-on-close":!0,size:"80vw",title:`${a.value.title}用户`},{footer:r(()=>[o(k,{onClick:e[3]||(e[3]=l=>c.value=!1)},{default:r(()=>[b("取消")]),_:1})]),default:r(()=>[m("div",A,[m("div",K,[o(y,{ref_key:"ruleFormRef",ref:D,"label-width":"100px","label-suffix":" :",rules:g,disabled:a.value.isView,model:a.value.row,"hide-required-asterisk":a.value.isView},{default:r(()=>[o(d,{label:"性别",prop:"gender"},{default:r(()=>[o(n,{modelValue:a.value.row.gender,"onUpdate:modelValue":e[0]||(e[0]=l=>a.value.row.gender=l),placeholder:"请选择性别",clearable:""},{default:r(()=>[(p(!0),T(C,null,q(f(x),l=>(p(),w(s,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(d,{label:"年龄",prop:"gender"},{default:r(()=>[o(n,{modelValue:a.value.row.user.detail.age,"onUpdate:modelValue":e[1]||(e[1]=l=>a.value.row.user.detail.age=l),placeholder:"请选择性别",clearable:""},{default:r(()=>[(p(!0),T(C,null,q(f(x),l=>(p(),w(s,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(d,{label:"患者描述",prop:"address"},{default:r(()=>[o($,{modelValue:a.value.row.address,"onUpdate:modelValue":e[2]||(e[2]=l=>a.value.row.address=l),placeholder:"请填写居住地址",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["rules","disabled","model","hide-required-asterisk"])])]),m("div",null,[Q,o(y,{"label-width":"100px","label-suffix":" :",rules:g,model:a.value.row,"hide-required-asterisk":a.value.isView},{default:r(()=>[o(d,{label:"眼震视图"},{default:r(()=>[m("img",{style:{height:"37.5vw",width:"100%"},src:f(V)},null,8,W)]),_:1}),o(d,{label:"机器判断"},{default:r(()=>[b(" 判断为右跳型眼震 ")]),_:1})]),_:1},8,["rules","model","hide-required-asterisk"])]),o(M,{ref_key:"proTable",ref:_,columns:L,"request-api":S,"init-param":F,"data-callback":R,onDargSort:B},{operation:r(l=>[o(k,{type:"primary",link:"",icon:f(H),onClick:le=>Y("查看",l.row)},{default:r(()=>[b("查看")]),_:2},1032,["icon","onClick"])]),_:1},8,["columns","init-param"]),o(Z,{ref_key:"drawerRef",ref:h},null,512)]),_:1},8,["modelValue","title"])}}});export{Z as _};
