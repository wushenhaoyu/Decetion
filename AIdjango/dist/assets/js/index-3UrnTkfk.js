import{g as q}from"./user-B5eqbc-g.js";import{d as h,m as f,T as z,v as y,r as _,o as V,c as C,t as F,x as M,b as l,w as d,u as I,U as O,a as x,z as J,D as K,Q as P,e as o,V as S,R as $,p as Q,g as j}from"./index-jvtWBQTx.js";import{_ as B}from"./_plugin-vue_export-helper-x3n3nnut.js";const G={class:"card filter"},H={key:0,class:"title sle"},L={class:"el-tree-node__label"},W=h({name:"TreeFilter"}),X=h({...W,props:{requestApi:{},data:{},title:{},id:{default:"id"},label:{default:"label"},multiple:{type:Boolean,default:!1},defaultValue:{}},emits:["change"],setup(r,{expose:m,emit:b}){const t=r,k={children:"children",label:t.label},s=f(),c=f([]),a=f([]),i=f(),w=()=>{t.multiple?i.value=Array.isArray(t.defaultValue)?t.defaultValue:[t.defaultValue]:i.value=typeof t.defaultValue=="string"?t.defaultValue:""};z(async()=>{if(w(),t.requestApi){const{data:e}=await t.requestApi();c.value=e,a.value=[{id:"",[t.label]:"全部"},...e]}}),y(()=>t.defaultValue,()=>P(()=>w()),{deep:!0,immediate:!0}),y(()=>t.data,()=>{var e;(e=t.data)!=null&&e.length&&(c.value=t.data,a.value=[{id:"",[t.label]:"全部"},...t.data])},{deep:!0,immediate:!0});const v=f("");y(v,e=>{s.value.filter(e)});const D=(e,g,u)=>{if(!e)return!0;let p=u.parent,n=[u.label],T=1;for(;T<u.level;)n=[...n,p.label],p=p.parent,T++;return n.some(U=>U.indexOf(e)!==-1)},N=b,E=e=>{t.multiple||N("change",e[t.id])},R=()=>{var e;N("change",(e=s.value)==null?void 0:e.getCheckedKeys())};return m({treeData:c,treeAllData:a,treeRef:s}),(e,g)=>{const u=_("el-input"),p=_("el-scrollbar");return V(),C("div",G,[e.title?(V(),C("h4",H,F(e.title),1)):M("",!0),l(u,{modelValue:v.value,"onUpdate:modelValue":g[0]||(g[0]=n=>v.value=n),placeholder:"输入关键字进行过滤",clearable:""},null,8,["modelValue"]),l(p,{style:K({height:e.title?"calc(100% - 95px)":"calc(100% - 56px)"})},{default:d(()=>[l(I(O),{ref_key:"treeRef",ref:s,"default-expand-all":"","node-key":e.id,data:e.multiple?c.value:a.value,"show-checkbox":e.multiple,"check-strictly":!1,"current-node-key":e.multiple?"":i.value,"highlight-current":!e.multiple,"expand-on-click-node":!1,"check-on-click-node":e.multiple,props:k,"filter-node-method":D,"default-checked-keys":e.multiple?i.value:[],onNodeClick:E,onCheck:R},{default:d(n=>[x("span",L,[J(e.$slots,"default",{row:n},()=>[o(F(n.node.label),1)],!0)])]),_:3},8,["node-key","data","show-checkbox","current-node-key","highlight-current","check-on-click-node","default-checked-keys"])]),_:3},8,["style"])])}}}),A=B(X,[["__scopeId","data-v-05af00f0"]]),Y=r=>(Q("data-v-b2b5dc6d"),r=r(),j(),r),Z={class:"content-box"},ee={class:"descriptions-box card"},te=Y(()=>x("span",{class:"text"}," 树形筛选器 🍓🍇🍈🍉",-1)),le=h({name:"treeFilter"}),ae=h({...le,setup(r){const m=S({departmentId:"1"}),b=s=>{$.success(`你选择了 id 为 ${s} 的数据🤔`),m.departmentId=s},t=S({departmentId:["11"]}),k=s=>{$.success(`你选择了 id 为 ${JSON.stringify(s)} 的数据🤔`),t.departmentId=s};return(s,c)=>{const a=_("el-descriptions-item"),i=_("el-descriptions");return V(),C("div",Z,[l(A,{label:"name",title:"部门列表(单选)","request-api":I(q),"default-value":m.departmentId,onChange:b},null,8,["request-api","default-value"]),l(A,{title:"部门列表(多选)",multiple:"",label:"name","request-api":I(q),"default-value":t.departmentId,onChange:k},null,8,["request-api","default-value"]),x("div",ee,[te,l(i,{title:"配置项 📚",column:1,border:""},{default:d(()=>[l(a,{label:"requestApi"},{default:d(()=>[o(" 请求分类数据的 api ")]),_:1}),l(a,{label:"data"},{default:d(()=>[o(" 分类数据，如果有分类数据，则不会执行 api 请求 ")]),_:1}),l(a,{label:"title"},{default:d(()=>[o(" treeFilter 标题 ")]),_:1}),l(a,{label:"id"},{default:d(()=>[o(" 选择的id，默认为 “id” ")]),_:1}),l(a,{label:"label"},{default:d(()=>[o(" 显示的label，默认为 “label” ")]),_:1}),l(a,{label:"multiple"},{default:d(()=>[o(" 是否为多选，默认为 false ")]),_:1}),l(a,{label:"defaultValue"},{default:d(()=>[o(" 默认选中的值 ")]),_:1})]),_:1})])])}}}),oe=B(ae,[["__scopeId","data-v-b2b5dc6d"]]);export{oe as default};
